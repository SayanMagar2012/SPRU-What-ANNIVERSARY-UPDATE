function onKey(e,t){document.addEventListener("keydown",(function(i){i.key===e&&t()}))}function onKeyHold(e,t,i){let n=!1;document.addEventListener("keydown",(function(t){t.key===e&&(n=!0)})),document.addEventListener("keyup",(function(t){t.key===e&&(n=!1)})),document.addEventListener("keydown",(function(e){n&&e.key===t&&i()}))}let AchievementON=!1;function setAchievement(e,t,i,n,s,o,c){setTimeout((()=>{let a=JSON.parse(localStorage.getItem(`achievements_${e}`))||{};AchievementON=!0,a[t]||(a[t]={status:"locked",icon:i,name:n,description:s,type:o,progress:0,maxProgress:c}),localStorage.setItem(`achievements_${e}`,JSON.stringify(a))}),400)}function addProgressAchievement(e,t,i){let n=JSON.parse(localStorage.getItem(`achievements_${e}`))||{};if(n[t]){if("unlocked"===n[t].status)return;let s=n[t].maxProgress;if(void 0===s)return;n[t].progress+=i,n[t].progress>=s&&(n[t].progress=s,n[t].status="unlocked"),localStorage.setItem(`achievements_${e}`,JSON.stringify(n)),updateProgressUI(t,n[t].progress,s)}}function updateProgressUI(e,t,i){document.querySelectorAll(".achievement").forEach((n=>{let s=n.querySelector(".title");if(s&&s.textContent.includes(e)){let e=n.querySelector("progress");e&&(e.value=t,e.max=i)}}))}function addProgressAchievement(e,t,i){let n=JSON.parse(localStorage.getItem(`achievements_${e}`))||{};if(n[t]){if("unlocked"===n[t].status)return;let s=n[t],o=s.maxProgress;if(void 0===o)return;s.progress+=i,s.progress>=o&&(s.progress=o,s.status="unlocked",showAchievementNotification(s.name,s.icon,s.description)),localStorage.setItem(`achievements_${e}`,JSON.stringify(n)),document.querySelectorAll(".achievement-info progress").forEach((e=>{e.closest(".achievement").querySelector(".title").innerText===s.name&&(e.value=s.progress,e.max=o)})),displayAchievements(RegisterMod)}}function unlockAchievement(e,t){showAchiNotificationDot();let i=JSON.parse(localStorage.getItem(`achievements_${e}`))||{};if(!i[t])return;let n=i[t];"unlocked"!==n.status&&(n.status="unlocked",localStorage.setItem(`achievements_${e}`,JSON.stringify(i)),showAchievementNotification(n.name,n.icon,n.description),displayAchievements(e),localStorage.setItem("achiNotificationDot",achiNotificationDot),achiNotificationDot+=1,localStorage.setItem("achiNotificationDot",achiNotificationDot),showAchiNotificationDot())}function showAchievementNotification(e,t,i){let n=document.getElementById("achievement-container");n||(n=document.createElement("div"),n.id="achievement-container",document.body.appendChild(n));let s=document.createElement("div");s.classList.add("achievement-notification");let o=`img/mod_achievements/${t}`;s.innerHTML=`\n        <img src="${o}" class="achievement-icon">\n        <div class="achievement-text">\n            <div class="title">${e}</div>\n            <div class="text">${i}</div>\n        </div>\n    `,n.appendChild(s),setTimeout((()=>{s.classList.add("visible")}),10),setTimeout((()=>{s.classList.remove("visible"),setTimeout((()=>s.remove()),500)}),5e3)}function displayAchievements(e){let t=JSON.parse(localStorage.getItem(`achievements_${e}`))||{},i=document.getElementById("achievements-list");if(i.innerHTML="",0!==Object.keys(t).length)for(let e in t){let n=t[e],s=document.createElement("div");s.classList.add("achievement");let o=`img/mod_achievements/${n.icon}`,c="locked"===n.status?"grayscale":"",a="locked"===n.status&&"hidden"===n.type?"???":n.name,r="locked"===n.status&&"hidden"===n.type?"???":n.description;s.innerHTML=`\n            <img src="${o}" class="achievement-icon ${c}">\n            <div class="achievement-info">\n                <div class="title">${a}</div>\n                <div class="text">${r}</div>\n                ${"progress"===n.type?`<progress id="progress-${e}" value="${n.progress}" max="${n.maxProgress}"></progress>`:""}\n            </div>\n        `,i.appendChild(s)}else i.innerHTML="<p>No achievements yet!</p>"}const style=document.createElement("style");style.innerHTML="\n    .achievement-icon.grayscale {\n        filter: grayscale(100%);\n        opacity: 0.5;\n    }\n",document.head.appendChild(style),document.getElementById("tab-myachi").addEventListener("click",(function(){displayAchievements(RegisterMod)}));